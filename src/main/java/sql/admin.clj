(ns sql.admin
  (:use [com.rps.util.dao.cljutil.daoutil2] )
  (:import [javax.servlet.http HttpServletRequest]
           [com.rps.util.dao SqlAndParams]
           [java.util ArrayList]))


(defsql pageSubject {
    :sql "select * from t_b_subject "
    :where (AND 
         ("subject_name"  "subject_name like ?" "%" "%")
         ("subject_status"  "subject_status = ?")
     )
    :page true
    :orderby true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
    :orderby-default " order by subject_id asc"
})

(defsql pageUserRole {
    :sql "select a.*, b.user_name, b.org_name, b.department_name from t_b_user_role a left join t_b_user b on a.user_id = b.user_id "
    :where (AND 
         ("role_id"  "a.role_id = ?")
         {"user_role_not_equal"  "a.user_role != ?"}
     )
    :page true
    :orderby true
    :orderby-default " order by a.user_role_id asc"
})

(defsql pageCheckFlow {
    :sql "select * from t_b_check_flow "
    :where (AND 
         ("flow_status"  "flow_status = ?")
     )
    :page true
    :orderby true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
    :orderby-default " order by check_flow_id asc"
})